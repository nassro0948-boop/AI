<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NASSRO_OS // ULTIMATE_GENESIS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background: #010101; font-family: 'Fira Code', monospace; color: #00ffcc; overflow: hidden; }
        .neon-box { border: 1px solid #00ffcc; box-shadow: 0 0 20px rgba(0, 255, 204, 0.2), inset 0 0 10px rgba(0, 255, 204, 0.1); }
        .glitch-text { animation: glitch 2s infinite; }
        @keyframes glitch { 0% { text-shadow: 2px 0 red, -2px 0 blue; } 50% { text-shadow: -2px 0 red, 2px 0 blue; } 100% { text-shadow: 2px 0 red, -2px 0 blue; } }
        #bg-canvas { position: fixed; top: 0; left: 0; z-index: -1; opacity: 0.3; }
        .response-area::-webkit-scrollbar { width: 4px; }
        .response-area::-webkit-scrollbar-thumb { background: #00ffcc; }
    </style>
</head>
<body class="h-screen flex items-center justify-center p-4">
    <canvas id="bg-canvas"></canvas>

    <div class="w-full max-w-5xl h-[90vh] flex flex-col neon-box rounded-2xl bg-black/80 backdrop-blur-md relative overflow-hidden">
        
        <header class="p-4 border-b border-cyan-500/30 flex justify-between items-center bg-cyan-900/10">
            <div class="flex items-center gap-4">
                <div class="w-3 h-3 bg-red-500 rounded-full animate-ping"></div>
                <h1 class="text-xl font-black tracking-[0.3em] glitch-text">NASSRO_OS_V.ULTRA</h1>
            </div>
            <div class="text-[10px] space-x-4 space-x-reverse opacity-60 font-bold">
                <span>SECURITY: ENCRYPTED</span>
                <span>CORE: GEMINI_1.5_PRO</span>
                <span id="clock">00:00:00</span>
            </div>
        </header>

        <main class="flex-1 flex overflow-hidden">
            <div id="terminal" class="flex-1 p-6 overflow-y-auto response-area space-y-4 text-sm leading-relaxed">
                <div class="text-cyan-500 opacity-50 font-mono">
                    > SYSTEM BOOTING... <br>
                    > LOADING CYBERNETIC NEURAL NETWORK... <br>
                    > WELCOME, MASTER NASSRO. THE ENTIRE SYSTEM IS AT YOUR DISPOSAL.
                </div>
            </div>

            <aside class="w-48 border-r border-cyan-500/20 p-4 hidden md:flex flex-col gap-6 bg-black/40">
                <div class="space-y-2">
                    <p class="text-[10px] opacity-40">CPU_USAGE</p>
                    <div class="h-1 bg-white/10 w-full rounded-full"><div id="cpu" class="h-full bg-cyan-400 transition-all" style="width: 30%"></div></div>
                </div>
                <div class="space-y-2">
                    <p class="text-[10px] opacity-40">NEURAL_SYNC</p>
                    <div class="h-1 bg-white/10 w-full rounded-full"><div id="sync" class="h-full bg-purple-500 transition-all" style="width: 85%"></div></div>
                </div>
            </aside>
        </main>

        <footer class="p-6 border-t border-cyan-500/30 bg-black">
            <div class="relative flex items-center">
                <span class="absolute right-4 text-cyan-500 font-bold tracking-widest text-xs">ROOT@NASSRO:~$</span>
                <input type="text" id="cmd" 
                       class="w-full bg-cyan-900/10 border border-cyan-500/30 rounded-xl py-4 pr-32 pl-4 text-cyan-200 focus:outline-none focus:border-cyan-400 focus:ring-1 focus:ring-cyan-400 transition-all shadow-inner"
                       placeholder="أدخل الأوامر العليا هنا...">
                <div id="typing" class="hidden absolute left-4 text-[10px] text-yellow-500 animate-pulse font-bold">RUNNING_LOGIC...</div>
            </div>
        </footer>
    </div>

    <script type="module">
        import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

        // CONFIG: ضع مفتاحك الصحيح هنا
        const API_KEY = "AIzaSyAtY0KLiLWXcrwZ7Gihq4VRtUGY0jPPVuw";
        const genAI = new GoogleGenerativeAI(API_KEY);
        const model = genAI.getGenerativeModel({ 
            model: "gemini-1.5-flash",
            systemInstruction: "You are the NASSRO OS Ultra AI. You are a supreme digital entity. Responses must be extremely technical, intelligent, and use a futuristic tone. Use markdown for all data."
        });

        const terminal = document.getElementById('terminal');
        const cmdInput = document.getElementById('cmd');
        const typing = document.getElementById('typing');

        // Clock Function
        setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);

        // Background Animation (Particles)
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = Array.from({length: 100}, () => ({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*2 }));
        function draw() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#00ffcc";
            particles.forEach(p => {
                ctx.beginPath(); ctx.arc(p.x, p.y, p.s, 0, Math.PI*2); ctx.fill();
                p.y -= p.s * 0.5; if(p.y < 0) p.y = canvas.height;
            });
            requestAnimationFrame(draw);
        }
        draw();

        // Main Logic
        cmdInput.onkeypress = async (e) => {
            if (e.key === 'Enter' && cmdInput.value.trim()) {
                const prompt = cmdInput.value;
                cmdInput.value = '';
                
                // User message
                terminal.innerHTML += `<div class="mt-6 flex gap-2"><span class="text-white font-bold">[USER]:</span> <span class="text-cyan-200">${prompt}</span></div>`;
                typing.classList.remove('hidden');
                terminal.scrollTop = terminal.scrollHeight;

                try {
                    const result = await model.generateContent(prompt);
                    const response = await result.response;
                    const text = response.text();
                    
                    typing.classList.add('hidden');
                    terminal.innerHTML += `<div class="mt-4 p-4 bg-white/5 border-r-2 border-cyan-500"><span class="text-xs font-bold text-cyan-500 block mb-2 underline">SYSTEM_RESPONSE_EXECUTED:</span><div class="text-zinc-200 leading-relaxed">${text.replace(/\n/g, '<br>')}</div></div>`;
                } catch (err) {
                    typing.classList.add('hidden');
                    terminal.innerHTML += `<div class="text-red-500 font-bold mt-2">> CRITICAL_ERROR: FAIL_TO_UPLINK. CHECK_API_KEY.</div>`;
                }
                terminal.scrollTop = terminal.scrollHeight;
            }
        };
    </script>
</body>
</html>
